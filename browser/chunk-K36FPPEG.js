import{a as Q}from"./chunk-U7ML6AN7.js";import{a as W}from"./chunk-LYLMUI46.js";import{E as l,F as D,G as x,J as v,K as S,L as A,R as F,S as j,W as k,e as b,f as E,ha as B,ia as O,j as C,ja as T,k as a,ka as w,l as f,la as R,ma as L,n as h,na as P,oa as M,p as _,pa as U,q as s,qa as V,r as n,ra as H,s as u,t as I,ta as N,ua as $,va as z,w as y,wa as G,x as p,xa as q,y as d,ya as J,za as K}from"./chunk-AI32RVC6.js";import"./chunk-OKLV52F3.js";import"./chunk-3DLAQMFO.js";import"./chunk-ZTU454F4.js";import"./chunk-4PGTP63H.js";import"./chunk-VWWSWLRN.js";import"./chunk-HC6MZPB3.js";import"./chunk-KORGI2TQ.js";import"./chunk-FERD25SW.js";import"./chunk-YYX6ZCUM.js";import"./chunk-EQKTRDAQ.js";import"./chunk-MM5QLNJM.js";import"./chunk-72KDLSWN.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-34YVJMRD.js";import"./chunk-MCRJI3T3.js";import"./chunk-DUYVFR4H.js";import"./chunk-W4QBDTHI.js";import"./chunk-F7DWBLHZ.js";import"./chunk-N63TDJNS.js";import"./chunk-BCJHBTI5.js";import"./chunk-R4LIVDQQ.js";import"./chunk-LDCFIES7.js";import"./chunk-TFIU3Q7B.js";import"./chunk-T3MMJBTT.js";import"./chunk-RUL3GU37.js";import"./chunk-LF5XB4YN.js";import"./chunk-OYAVQN5W.js";function X(i,r){if(i&1&&(n(0,"ion-title"),l(1),u()),i&2){let m=d().index,t=d();a(),D(t.result_class[m])}}function Y(i,r){if(i&1&&(n(0,"ion-title"),l(1),u()),i&2){let m=d().index,t=d();a(),x("\u0422\u043E\u0447\u043D\u0456\u0441\u0442\u044C: ",t.result_accuracy[m],"")}}function Z(i,r){if(i&1&&(n(0,"ion-card-subtitle"),l(1),u()),i&2){let m=d().index,t=d();a(),x(" \u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0456\u0457 \u0437 \u043F\u0435\u0440\u0435\u0440\u043E\u0431\u043A\u0438: ",t.recommendations[m]," ")}}function t0(i,r){if(i&1){let m=y();n(0,"ion-item")(1,"ion-grid",1)(2,"ion-row",8)(3,"ion-col"),I(4,"img",9),u(),n(5,"ion-col")(6,"ion-button",10),p("click",function(){let e=b(m).index,o=d();return E(o.classifyImage(e))}),l(7,"\u041A\u043B\u0430\u0441\u0438\u0444\u0456\u043A\u0443\u0432\u0430\u0442\u0438"),u()(),n(8,"ion-col"),_(9,X,2,1,"ion-title",11),u(),n(10,"ion-col"),_(11,Y,2,1,"ion-title",11),u()(),_(12,Z,2,1,"ion-card-subtitle",11),u()()}if(i&2){let m=r.$implicit,t=r.index,e=d();a(4),s("src",m,C),a(5),s("ngIf",e.result_class&&e.result_class[t]),a(2),s("ngIf",e.result_accuracy&&e.result_accuracy[t]),a(),s("ngIf",e.recommendations&&e.recommendations[t])}}var s0=(()=>{let r=class r{classifyImage(t){this.result_class[t]="\u0417\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0435\u043D\u043D\u044F...";let e=this.detected_objects[t];if(!e){console.error("URL \u0432\u0456\u0434\u0441\u0443\u0442\u043D\u0456\u0439:",t);return}fetch(e).then(o=>o.blob()).then(o=>{let g=new File([o],`image_${t}.jpg`,{type:o.type});return this.apiService.ClassifyObject(g).subscribe(c=>{c.result?this.result_class[t]=c.result:console.error("\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u0432\u0456\u0434\u0441\u0443\u0442\u043D\u0456\u0439 \u0443 \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0456:",c),c.accuracy?this.result_accuracy[t]=c.accuracy:console.error("\u0422\u043E\u0447\u043D\u0456\u0441\u0442\u044C \u0432\u0456\u0434\u0441\u0443\u0442\u043D\u044F \u0443 \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0456:",c),c.recomms?this.recommendations[t]=c.recomms:console.error("\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0456\u0457 \u0432\u0456\u0434\u0441\u0443\u0442\u043D\u0456 \u0443 \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0456:",c)},c=>{console.error("\u041F\u043E\u043C\u0438\u043B\u043A\u0430 \u043A\u043B\u0430\u0441\u0438\u0444\u0456\u043A\u0430\u0446\u0456\u0457:",c)})})}gotoStats(){let t=[this.detected_objects,this.result_class,this.result_accuracy,this.recommendations];this.dataService.setData(t),this.router.navigate(["/local-statistics"])}constructor(t,e,o){this.apiService=t,this.dataService=e,this.router=o,this.detected_objects=[],this.result_class=[],this.result_accuracy=[],this.recommendations=[]}ngOnInit(){this.detected_objects=this.dataService.getData()}};r.\u0275fac=function(e){return new(e||r)(f(Q),f(W),f(F))},r.\u0275cmp=h({type:r,selectors:[["app-obj-classification"]],decls:22,vars:5,consts:[[3,"translucent"],[1,"ion-text-center"],[3,"fullscreen"],["slot","end"],["fill","outline",3,"routerLink"],[1,"ion-margin"],[4,"ngFor","ngForOf"],["expand","block","color","primary",3,"click","disabled"],[1,"ion-align-items-center"],["width","100","height","100",3,"src"],["expand","block","fill","outline",3,"click"],[4,"ngIf"]],template:function(e,o){e&1&&(n(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),l(3,"\u0421\u0438\u0441\u0442\u0435\u043C\u0430 \u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u0432\u0430\u043D\u043D\u044F \u0432\u0442\u043E\u0440\u0438\u043D\u043D\u043E\u0457 \u0441\u0438\u0440\u043E\u0432\u0438\u043D\u0438"),u()()(),n(4,"ion-content",2)(5,"ion-toolbar")(6,"ion-title",1),l(7,"\u041A\u043B\u0430\u0441\u0438\u0444\u0456\u043A\u0430\u0446\u0456\u044F \u043E\u0431'\u0454\u043A\u0442\u0456\u0432"),u(),n(8,"ion-buttons",3)(9,"ion-button",4),l(10,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u0432\u0430\u043D\u044C"),u()()(),n(11,"ion-card",5)(12,"ion-card-header")(13,"ion-card-title",1),l(14,"\u0421\u043F\u0438\u0441\u043E\u043A \u0432\u0438\u0434\u0456\u043B\u0435\u043D\u0438\u0445 \u043E\u0431'\u0454\u043A\u0442\u0456\u0432"),u(),n(15,"ion-card-subtitle",1),l(16,` \u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u043A\u043D\u043E\u043F\u043A\u0443 "\u041A\u043B\u0430\u0441\u0438\u0444\u0456\u043A\u0443\u0432\u0430\u0442\u0438" \u043D\u0430 \u043A\u043E\u0436\u043D\u043E\u043C\u0443 \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u0456 \u0434\u043B\u044F \u043A\u043B\u0430\u0441\u0438\u0444\u0456\u043A\u0430\u0446\u0456\u0457. \u041F\u0456\u0441\u043B\u044F \u043A\u043B\u0430\u0441\u0438\u0444\u0456\u043A\u0430\u0446\u0456\u0457 \u0432\u0441\u0456\u0445 \u043E\u0431'\u0454\u043A\u0442\u0456\u0432 \u043C\u043E\u0436\u043B\u0438\u0432\u043E \u043F\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u043E \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0438 \u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u0432\u0430\u043D\u043D\u044F. `),u()(),n(17,"ion-card-content")(18,"ion-list"),_(19,t0,13,4,"ion-item",6),u()()(),n(20,"ion-button",7),p("click",function(){return o.gotoStats()}),l(21," \u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u043E \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0438 "),u()()),e&2&&(s("translucent",!0),a(4),s("fullscreen",!0),a(5),s("routerLink","/global-statistics"),a(10),s("ngForOf",o.detected_objects),a(),s("disabled",o.result_accuracy.length<o.detected_objects.length))},dependencies:[K,B,O,T,w,R,L,P,M,U,V,H,N,$,z,G,q,J,A,v,S,k,j],encapsulation:2});let i=r;return i})();export{s0 as ObjClassificationPage};
